using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Web;
using System.Web.Mvc;
using TenSecondsMvc;

namespace TenSecondsMvc.Controllers
{
    //http://qt.gtimg.cn/2579_71&q=sh600173,sz002634,sz000002
    public class TSController : Controller
    {
        private static string[] _stocks = new string[] { "300181", "600770", "001696", "002118", "601899", "600210", "000938", "002369", "600961", "600684", "002461", "000505", "000507", "002046", "300232", "600759", "601158", "600917", "600132", "600106", "600279", "601005", "600729", "002441", "002772", "002317", "002070", "600568", "000042", "600038", "600428", "600645", "002423", "002448", "000544", "600020", "300018", "300327", "600745", "600610", "600280", "000063", "000715", "601608", "600030", "601998", "000099", "600329", "603996", "300364", "600373", "300270", "000957", "600528", "600856", "600522", "000540", "600158", "002659", "002092", "300435", "002511", "000798", "600088", "000685", "000758", "000506", "600138", "300052", "600084", "002445", "000961", "601098", "600195", "601898", "600818", "600737", "000930", "000031", "000157", "300393", "002738", "600110", "603019", "000970", "002657", "300035", "300496", "600872", "002579", "000060", "600489", "002021", "600053", "002779", "300308", "600634", "000039", "002129", "002542", "600500", "600675", "000979", "603017", "600252", "002364", "002145", "000777", "600705", "600765", "002163", "002013", "600760", "002179", "000768", "600893", "000738", "600372", "300114", "000043", "601808", "002401", "601866", "600896", "600026", "300177", "000951", "601989", "601618", "601390", "000996", "601766", "601919", "601988", "600056", "601106", "601179", "000797", "600118", "601186", "601601", "601857", "600028", "601088", "600536", "601628", "601965", "601318", "601600", "600050", "600176", "601800", "601668", "600877", "601117", "601985", "002116", "600007", "601888", "601111", "600730", "601669", "600150", "000009", "300414", "002051", "002057", "000928", "600595", "300489", "600890", "000736", "600520", "000887", "600292", "002298", "300172", "600764", "603988", "600685", "600787", "000151", "002471", "002080", "603126", "600970", "000759", "600654", "000931", "600517", "300097", "300173", "000816", "600869", "300122", "600121", "601717", "002197", "300410", "601877", "000702", "300224", "002157", "300101", "600320", "000733", "300158", "002771", "603567", "600023", "002522", "000705", "002489", "600216", "002703", "002677", "600352", "600052", "600070", "600113", "600120", "603338", "002266", "600797", "600633", "002346", "300333", "002429", "600999", "600036", "601872", "000966", "600525", "300115", "300195", "002616", "002391", "300348", "000783", "600119", "600345", "600900", "600757", "000520", "300196", "300301", "600584", "600148", "600333", "600215", "000661", "002071", "601633", "000835", "600192", "603099", "000625", "000753", "000767", "002069", "002378", "600895", "000869", "002637", "603601", "600767", "300440", "300304", "600725", "002200", "600096", "000903", "002428", "000878", "002059", "600239", "000538", "600792", "000807", "002182", "000573", "000429", "000539", "002060", "002181", "002725", "002162", "600805", "000819", "600963", "000683", "002063", "002406", "002689", "002692", "002161", "600766", "300174", "600655", "001896", "300064", "600531", "002437", "300305", "002177", "601028", "600066", "002289", "000565", "000514", "002223", "600206", "000584", "600778", "002718", "002277", "600652", "300099", "002427", "600588", "603600", "002756", "002014", "600157", "002326", "300187", "300230", "601933", "002641", "002753", "600105", "603901", "002365", "000663", "603308", "300377", "300457", "600317", "000670", "603198", "002334", "000411", "300131", "002528", "000635", "603598", "600858", "300085", "000862", "300231", "300221", "000975", "000526", "002126", "603969", "300020", "000806", "002519", "300127", "002786", "300337", "603066", "002420", "300381", "002566", "002458", "600824", "603939", "600594", "300376", "300125", "002751", "300096", "300212", "300080", "600289", "300014", "300211", "600277", "002686", "600537", "002019", "002603", "300310", "600978", "000150", "002627", "300328", "601388", "002183", "600602", "002447", "300249", "603328", "300415", "600887", "600197", "601038", "000800", "600742", "600819", "600421", "002304", "600348", "300030", "600261", "000608", "300274", "300121", "000671", "600486", "300373", "002732", "000729", "600188", "000792", "000088", "600248", "002178", "000811", "601890", "600213", "600319", "002607", "002559", "600692", "600881", "002370", "000691", "002540", "002284", "600108", "002375", "002623", "600351", "603188", "002497", "600177", "300261", "002323", "300467", "002098", "002639", "300385", "603227", "002658", "002076", "600353", "000400", "002561", "000425", "300160", "600599", "002733", "002562", "601377", "601166", "002674", "002436", "000598", "002355", "600141", "601799", "300256", "002396", "002291", "300464", "600866", "300143", "603789", "002664", "600571", "300469", "300136", "600485", "002105", "002294", "600657", "002390", "600255", "002480", "300037", "300472", "002087", "000902", "300159", "002388", "000778", "000949", "600975", "603022", "300259", "600628", "002527", "600540", "600165", "002328", "600359", "300013", "000720", "600661", "002127", "002341", "002546", "300260", "300109", "300248", "002532", "600888", "600075", "002700", "600545", "600638", "000756", "600587", "603399", "000620", "600735", "600825", "601336", "600785", "600208", "002120", "300130", "600782", "002539", "000571", "601155", "600777", "002376", "002705", "603889", "600803", "600596", "002188", "002264", "002001", "002089", "000997", "000751", "300207", "300372", "000955", "002506", "300139", "000418", "600415", "600057", "300111", "600769", "000678", "600476", "002125", "600416", "600830", "300147", "600506", "600162", "600420", "000900", "300137", "300163", "002767", "300450", "002746", "002332", "603008", "000960", "000511", "000639", "600291", "000983", "600117", "600369", "002584", "600505", "600338", "600211", "600326", "600749", "000762", "000752", "600773", "600139", "002673", "300106", "601168", "002302", "601069", "002149", "002536", "000721", "000564", "000610", "000906", "600704", "000785", "600168", "002194", "600005", "600275", "600368", "300420", "000831", "600058", "000858", "300292", "600580", "600173", "300483", "300142", "002107", "002130", "300357", "600995", "002775", "300089", "601010", "300283", "300498", "002581", "002648", "300253", "002268", "002372", "002003", "603568", "000880", "000338", "600300", "603309", "600152", "603518", "300190", "002586", "002240", "002111", "000581", "603023", "002308", "002058", "300017", "002735", "600859", "600641", "300112", "000559", "600371", "600246", "300057", "603010", "002654", "002643", "000789", "002276", "603117", "002785", "600847", "600576", "600309", "600681", "002543", "300268", "300482", "002085", "000638", "002739", "300168", "300055", "002590", "000533", "601801", "600063", "002331", "600012", "000543", "600575", "600270", "600648", "002261", "002218", "601689", "300229", "002139", "600702", "002043", "000630", "600237", "601233", "000591", "002052", "300302", "600085", "600846", "300033", "600100", "300321", "600647", "300164", "300185", "600438", "600365", "000766", "600867", "300265", "002156", "002491", "002560", "002576", "000419", "002243", "600763", "600780", "600125", "000809", "300197", "300461", "300047", "002386", "300205", "300342", "002459", "600807", "600488", "000710", "002564", "002238", "600330", "600161", "002531", "600535", "300169", "002354", "000877", "600419", "002283", "002113", "300165", "002523", "002510", "002009", "002466", "600671", "000627", "002453", "002122", "300029", "600339", "600378", "002100", "600225", "002134", "600717", "600800", "000090", "002759", "300245", "600579", "300390", "002419", "300397", "300332", "600751", "002509", "600509", "300394", "600322", "600665", "600582", "002709", "603085", "600112", "600620", "300362", "000965", "002220", "002124", "300392", "603158", "600512", "300178", "300001", "000070", "600089", "002213", "000025", "603866", "601000", "300146", "300005", "002517", "300129", "000554", "002254", "000732", "600590", "300347", "002347", "000652", "600169", "000795", "002078", "300123", "002300", "601099", "600222", "600667", "600129", "600281", "000825", "002433", "300046", "002366", "002728", "002233", "002766", "000662", "002572", "000531", "600820", "002079", "600736", "300416", "002024", "000718", "300284", "000570", "002032", "002503", "600077", "300144", "002454", "603268", "002405", "300428", "603838", "000518", "300468", "601126", "300179", "600990", "600839", "000935", "000731", "600039", "000801", "600678", "601107", "000760", "300382", "002028", "603508", "002712", "300078", "002538", "300322", "000860", "002676", "300113", "002555", "002138", "000631", "002273", "002585", "002395", "600623", "002038", "300108", "300100", "600481", "300444", "002381", "000895", "000707", "002472", "002693", "300075", "000909", "300079", "600303", "300204", "600723", "600258", "600376", "002665", "000959", "600008", "000681", "600604", "002016", "600823", "002748", "002285", "002558", "000005", "300150", "002602", "300050", "600460", "002588", "600734", "600458", "600241", "600551", "000617", "603688", "600462", "002153", "600871", "000852", "603026", "300090", "603703", "600711", "002599", "002446", "600392", "002426", "000407", "300476", "002580", "002299", "002400", "002752", "600183", "002095", "600226", "002259", "000410", "000698", "000018", "000555", "300002", "000008", "300156", "300479", "600613", "300189", "600810", "002278", "002361", "000933", "000017", "000006", "601139", "000027", "000089", "002168", "000062", "000011", "000050", "000029", "000019", "000032", "000037", "000021", "000016", "000010", "000020", "600548", "000045", "000022", "000166", "600834", "600642", "600653", "600626", "603018", "000601", "000717", "002551", "600748", "600104", "601607", "300236", "600822", "600688", "600689", "600680", "600508", "600073", "002565", "600848", "002252", "300039", "600838", "600170", "600315", "300008", "600835", "600009", "300226", "601727", "600021", "600171", "600843", "600018", "000672", "000967", "600841", "600146", "600306", "601225", "000812", "601015", "002267", "000563", "601369", "600884", "600567", "002500", "000755", "600740", "600809", "000680", "600234", "600546", "002097", "300452", "002598", "600529", "002026", "002193", "002490", "000498", "002526", "600385", "600547", "603021", "000822", "600350", "600022", "000409", "300492", "000915", "000701", "600549", "600897", "600755", "000905", "600815", "603168", "000014", "300210", "002358", "002563", "600429", "600409", "600031", "601567", "300453", "000863", "600293", "600116", "300051", "002115", "300056", "002469", "002159", "002312", "002742", "002216", "300298", "000632", "000779", "300295", "600898", "300384", "002621", "300072", "601116", "300408", "002050", "002110", "002780", "300276", "600370", "300066", "600703", "600636", "002224", "002337", "300044", "300485", "300466", "601058", "300493", "300339", "603108", "002440", "002066", "300119", "600180", "300154", "002589", "002620", "300241", "300243", "600439", "300126", "002073", "002474", "002141", "002642", "002123", "002493", "002146", "300290", "000668", "000517", "600017", "002593", "300214", "300470", "002520", "603366", "300311", "002629", "000650", "002336", "603000", "600829", "600079", "300087", "603030", "300458", "300447", "300359", "600218", "002186", "603818", "600706", "600891", "002573", "600790", "600425", "600103", "002646", "600076", "002457", "000606", "600243", "600381", "000599", "600600", "002094", "600690", "000837", "002687", "600662", "300429", "002039", "000589", "300191", "300102", "600283", "600796", "000913", "300254", "002173", "300216", "600479", "002550", "002373", "002557", "300140", "002439", "002232", "000826", "601636", "002287", "002781", "600720", "002359", "002301", "002408", "002521", "600533", "002027", "002029", "000739", "002769", "002324", "300442", "603566", "002663", "600000", "600639", "600284", "300481", "002225", "000780", "000592", "601666", "600312", "000001", "600436", "600696", "600090", "600490", "300375", "300438", "600804", "601258", "600395", "000629", "603318", "600697", "002711", "002456", "300053", "603611", "002215", "601288", "600313", "000061", "603699", "600449", "600377", "600857", "600366", "002142", "600982", "600051", "603088", "601789", "600798", "603788", "601018", "600724", "600768", "600863", "002389", "002212", "002757", "603636", "600862", "000948", "600219", "002314", "000911", "600712", "002096", "000421", "601009", "600713", "600775", "600682", "600889", "600064", "300417", "000504", "002305", "600282", "000737", "300004", "600250", "002553", "000920", "600029", "300145", "300068", "300346", "000012", "300198", "002714", "002745", "600543", "002451", "000700", "600101", "603333", "601677", "002574", "002578", "000993", "600131", "600016", "002234", "600235", "000609", "002397", "002684", "002614", "002303", "002690", "300188", "002699", "300495", "000521", "600337", "300439", "000723", "000667", "600107", "600175", "000333", "000782", "300237", "002269", "002034", "600868", "600873", "300275", "000889", "002660", "000637", "002351", "002719", "300319", "300341", "002137", "300463", "600993", "600808", "600618", "600695", "300369", "000502", "600606", "601368", "601311", "603993", "600876", "002333", "002114", "002293", "600209", "000735", "002617", "002128", "601699", "601599", "600663", "600784", "300423", "002088", "600783", "000830", "600223", "600789", "600727", "000726", "000568", "603766", "000998", "002363", "601012", "300263", "002682", "603729", "300105", "600491", "603003", "002442", "600592", "600630", "002625", "002671", "603686", "002604", "600388", "002750", "601188", "600853", "002726", "600470", "603368", "600423", "601003", "000528", "002717", "000524", "600285", "600480", "600231", "603669", "002535", "601222", "600099", "600739", "300149", "600249", "002706", "000697", "603006", "600167", "002280", "300269", "600513", "002250", "002394", "600363", "300343", "600186", "601008", "002501", "300296", "002131", "002734", "002651", "002258", "300289", "002189", "000513", "002374", "002033", "002475", "300010", "603519", "300184", "300421", "002393", "000532", "601777", "002322", "300206", "600985", "002413", "002577", "002319", "300003", "300446", "600135", "600612", "002508", "603883", "600559", "600137", "000977", "600756", "300175", "300288", "300042", "600149", "300293", "600299", "300487", "300433", "300058", "601798", "600466", "002513", "002382", "300297", "002765", "600738", "600328", "603169", "600826", "600123", "000558", "002166", "300006", "603355", "002106", "600422", "600806", "300418", "000560", "002737", "002516", "300413", "002640", "603589", "600463", "002661", "002782", "002380", "300153", "300192", "002518", "300152", "002422", "002121", "300405", "002499", "600478", "002022", "002335", "300340", "002770", "002230", "600499", "600986", "603828", "300086", "300391", "600557", "300455", "300445", "002418", "002119", "603111", "300061", "600518", "002367", "002773", "600572", "002450", "002669", "000048", "002425", "002072", "002549", "002783", "600260", "002012", "000939", "300338", "300257", "300272", "600997", "600272", "300234", "600097", "002656", "601216", "600699", "300475", "300202", "300203", "300303", "300360", "002444", "002031", "002342", "600160", "600307", "002279", "002037", "002318", "603456", "300040", "600998", "300406", "601566", "600555", "002411", "603199", "002432", "000989", "000552", "002067", "000908", "002295", "600355", "002349", "600496", "300258", "600577", "300316", "603005", "000666", "300120", "601908", "002020", "002662", "600683", "300399", "000821", "600791", "600578", "000725", "600860", "601002", "600495", "300400", "300083", "002191", "600190", "600650", "600754", "300128", "600821", "300334", "000897", "002515", "600560", "002443", "600199", "002090", "600446", "002470", "000546", "600201", "601992", "600232", "002721", "000587", "300252", "002548", "300091", "300434", "600679", "600396", "600714", "600390", "603918", "000545", "601958", "002722", "600686", "300032", "000655", "000919", "601007", "002464", "300225", "300443", "002723", "000656", "600586", "600127", "600080", "000669", "002688", "002597", "603311", "002716", "002488", "000408", "300093", "600616", "002202", "002762", "600143", "300411", "600383", "002626", "300233", "000820", "603979", "600609", "002533", "002636", "002081", "000402", "603369", "600836", "002609", "300182", "002353", "601016", "000612", "002315", "600676", "601328", "600530", "600750", "600561", "600362", "002176", "600959", "600220", "600200", "600746", "600287", "002438", "002091", "002061", "600389", "600212", "601199", "601313", "002226", "600527", "000550", "600418", "601886", "002484", "002600", "002316", "603558", "600976", "600380", "002398", "000688", "300107", "000600", "601939", "000950", "600153", "300116", "600668", "300117", "002198", "002404", "002462", "002486", "000918", "600273", "600622", "300317", "300412", "300213", "300193", "002495", "600728", "000922", "300264", "002650", "000937", "000856", "000401", "603997", "603222", "600566", "601718", "601218", "603885", "601929", "600189", "000420", "601518", "000623", "300022", "600432", "000875", "300309", "002339", "300024", "603678", "600556", "000692", "600573", "300460", "600983", "002554", "601579", "300371", "600605", "300368", "002763", "600981", "300282", "300124", "300041", "002556", "002296", "002496", "002695", "600054", "600172", "002680", "000056", "002329", "601231", "300425", "600191", "300161", "000693", "600743", "600741", "300271", "603799", "000536", "002321", "600744", "000404", "300027", "300071", "600290", "600240", "000687", "600621", "600801", "600015", "600340", "002630", "000936", "300095", "000793", "600360", "002758", "603300", "002185", "000428", "601688", "600308", "000509", "002494", "000156", "600410", "002670", "600156", "000790", "600055", "600062", "000999", "601558", "300110", "000069", "300074", "300350", "600011", "300462", "000607", "603306", "603128", "000850", "300291", "600426", "600375", "000932", "600361", "600882", "000036", "000882", "600503", "300045", "002007", "600629", "300330", "002645", "600521", "600475", "000988", "002042", "300180", "002064", "600448", "600325", "002685", "000963", "002248", "000727", "600850", "601113", "601226", "600726", "600027", "002035", "002274", "300278", "300133", "300012", "300323", "600812", "000916", "002004", "300401", "002463", "000548", "600698", "002155", "600731", "000722", "000422", "000883", "000615", "000665", "300471", "300176", "002541", "300219", "002002", "002229", "002325", "600316", "600461", "600122", "002062", "600885", "002211", "600532", "600331", "002144", "603002", "300345", "600758", "600367", "300427", "300026", "603116", "002697", "600400", "000525", "002165", "600128", "603015", "002056", "600971", "000703", "002132", "300374", "603223", "300157", "300208", "600305", "600570", "600276", "601100", "000622", "002492", "300488", "600356", "002591", "002104", "002237", "600487", "000716", "002387", "600510", "002068", "600179", "000953", "000923", "000709", "300141", "300279", "300273", "002402", "603077", "300477", "002217", "300048", "000633", "002208", "000417", "603011", "002343", "002290", "600093", "603609", "300448", "000757", "002356", "300419", "601101", "600640", "002729", "603898", "600467", "002595", "300424", "600855", "600271", "600677", "600151", "603698", "000547", "600343", "600879", "002025", "600501", "600987", "600814", "300478", "002430", "600477", "002534", "600126", "603618", "601177", "600323", "300199", "002158", "300007", "002362", "600774", "002036", "002498", "300300", "300170", "300449", "603616", "600267", "600387", "002529", "600583", "000861", "002724", "000921", "600060", "002702", "600851", "002099", "000078", "600837", "603288", "002023", "600082", "002653", "002399", "002344", "002583", "600238", "601118", "002596", "601969", "600221", "000566", "000886", "300084", "000572", "000619", "600585", "300329", "002255", "002203", "300277", "603718", "600619", "600398", "300065", "002415", "000503", "000616", "002465", "000567", "002184", "600515", "002311", "300320", "002206", "600664", "600864", "600202", "600095", "002615", "600187", "300388", "000728", "600511", "002074", "002449", "002736", "600617", "601918", "600886", "600061", "002205", "601211", "600562", "000004", "300077", "002093", "600358", "300094", "600109", "000516", "000159", "600335", "000750", "002749", "002045", "000859", "600538", "002768", "600321", "600268", "600406", "600795", "300285", "002377", "002275", "000978", "600236", "600310", "600519", "002424", "600459", "600992", "603555", "600523", "300019", "000987", "000523", "600098", "600771", "002133", "000537", "603599", "002482", "600259", "300436", "601333", "600894", "601238", "002410", "000096", "000952", "600297", "600256", "000529", "000776", "600589", "600382", "002101", "000576", "002152", "600831", "601616", "002187", "600979", "002524", "300227", "300356", "002708", "002281", "300251", "600597", "600708", "300480", "300383", "002741", "600184", "601788", "601818", "600251", "600433", "002102", "600067", "002694", "600059", "000596", "603118", "002655", "601398", "600701", "600068", "002340", "000651", "600185", "603808", "600037", "002241", "300098", "000628", "300465", "603588", "300200", "002348", "002414", "300034", "600072", "600687", "600269", "000899", "002460", "000791", "300497", "300228", "002357", "300432", "002743", "300299", "002479", "300387", "000030", "002327", "600196", "600624", "600781", "600399", "600660", "000926", "600166", "603806", "600203", "600483", "002222", "600802", "002679", "600033", "603166", "600965", "603315", "002507", "600452", "002083", "000541", "002644", "600493", "002760", "600716", "601928", "600498", "000561", "600469", "000636", "601700", "600482", "601996", "000713", "600615", "002681", "300395", "600526", "000026", "300386", "002210", "300287", "300240", "600651", "300398", "601901", "600601", "002196", "600552", "603998", "600507", "600516", "000055", "000818", "000046", "002270", "600563", "002195", "002467", "300267", "002262", "000501", "600295", "000888", "002761", "002407", "002011", "600354", "603999", "600405", "002713", "600673", "000413", "601198", "002017", "601555", "300353", "300183", "600718", "002135", "600114", "000893", "002199", "300486", "002672", "600393", "002221", "002140", "300354", "600133", "000828", "002117", "300171", "600006", "600081", "601515", "600958", "002310", "002271", "600753", "002755", "002175", "300367", "600776", "300379", "002545", "000962", "000301", "300118", "000958", "600637", "002611", "600086", "600811", "600115", "002086", "300166", "002167", "000682", "300217", "600875", "603606", "600278", "300059", "002675", "601208", "000686", "300239", "600693", "600178", "000423", "002352", "600614", "300378", "300011", "600658", "300215", "000917", "002730", "600833", "300403", "300167", "300335", "300396", "600565", "300244", "002715", "002041", "300325", "000049", "002054", "002666", "002571", "002005", "300473", "002260", "002055", "002330", "300409", "603800", "002632", "600136", "300073", "000673", "600844", "002618", "300314", "002008", "600603", "600611", "600635", "601519", "300021", "600403", "000708", "002249", "600233", "000910", "600346", "600558", "601001", "000593", "601991", "600198", "600694", "000985", "601006", "600094", "600159", "002204", "000679", "600593", "600719", "600747", "000881", "601880", "002606", "002214", "000530", "002505", "002487", "002236", "600257", "600288", "603025", "002077", "300134", "000613", "600327", "000719", "002385", "002263", "002421", "002512", "300103", "002030", "603123", "002731", "603968", "300307", "002547", "601021", "600854", "000551", "300366", "300451", "600874", "600193", "603012", "002010", "603100", "600674", "002272", "002253", "600035", "002171", "002477", "300250", "601999", "600227", "600988", "600497", "600078", "600649", "600229", "000848", "000990", "300430", "600828", "002190", "600391", "002628", "000488", "603899", "300138", "600969", "002345", "600318", "000823", "002288", "300255", "000158", "002160", "002478", "600228", "300151", "002108", "600230", "002256", "600707", "000838", "002569", "002251", "000415", "603167", "600960", "000605", "002297", "002649", "300294", "600083", "600883", "601137", "600455", "300363", "300422", "002698", "002282", "600880", "603936", "300404", "600966", "300318", "600130", "002244", "601678", "000695", "600302", "300070", "002594", "000761", "002570", "300352", "002307", "000786", "002148", "603009", "300016", "600980", "601169", "000802", "002392", "002350", "300223", "600861", "600266", "600111", "600262", "600435", "600967", "002151", "000788", "600598", "601588", "603869", "000582", "002613", "600386", "300441", "002154", "600794", "600074", "600048", "600550", "002047", "600845", "000690", "300031", "601011", "600456", "000595", "600155", "600973", "300402", "002476", "300135", "300246", "600379", "600019", "601968", "002552", "300023", "600892", "000040", "600010", "002634", "300312", "603398", "002776", "002601", "601339", "600827", "600468", "600721", "600865", "002455", "600332", "600004", "002170", "600581", "002592", "002245", "002172", "600336", "002587", "002701", "600666", "002338", "002668", "300082", "603001", "002227", "002667", "000898", "600397", "600569", "600816", "000969", "300380", "600298", "300067", "300218", "300370", "300009", "300286", "000868", "300155", "002635", "603696", "600502", "600761", "600207", "002136", "002403", "002416", "603020", "002610", "600643", "300015", "002740", "002180", "603989", "300389", "002747", "000100" };
        // GET: Stock
        public ActionResult Index()
        {
            return View();
        }

        public ActionResult List()
        {
            return View();
        }

        public ActionResult ListByVolume(int? count, int multiple = 4)
        {
            var result = new List<string>();
            foreach (var item in _stocks)
            {
                var summary = GetMinuteSummary(item, count);
                var bigVolumes = summary.Details.Where(i => i.VolumeValue > summary.AverageVolumeValue * multiple);
                var negativeBigVolumes = bigVolumes.Where(i => !i.IsPositive).ToList();
                if (negativeBigVolumes.Any(i=>i.VolumeIndex ==0 || i.VolumeIndex ==1))
                {
                    continue;
                }
                var positiveBigVolumesCount = bigVolumes.Count() - negativeBigVolumes.Count;// bigVolumes.Where(i => i.IsPositive).Count();
                var negativeBigVolumesCount = negativeBigVolumes.Count;
                if (positiveBigVolumesCount >= 2 && positiveBigVolumesCount > negativeBigVolumesCount)
                {
                    result.Add(item);
                }
            }
            return View(result.ToArray());
        }


        private MinuteSummary GetMinuteSummary(string code, int? count)
        {
            var result = new MinuteSummary();
            result.Code = code;

            var prefix = code.StartsWith("60") ? "sh" : "sz";
            if (code == "999999")
            {
                prefix = "sh";
                code = "000001";
            }
            var url = "http://data.gtimg.cn/flashdata/hushen/minute/" + prefix + code + ".js?" + new Random().NextDouble().ToString();
            var data = HttpGet(url);
            var rr = data.Split(new string[] { @"\n" }, StringSplitOptions.RemoveEmptyEntries);
            result.Code = code;
            result.Details = new List<MinuteDetail>();
            for (int i = 2; i < rr.Length - 1; i++)
            {
                var items = rr[i].Split(' ');

                var detail = new MinuteDetail
                {
                    Price = float.Parse(items[1]),
                    VolumeValue = int.Parse(items[2])
                };
                result.Details.Add(detail);
            }

            if (count.HasValue)
            {
                result.Details = result.Details.Take(count.Value).ToList();
            }

            result.AverageVolumeValue = (int)(result.Details.Last().VolumeValue / result.Details.Count);

            for (int i = result.Details.Count - 1; i > 0; i--)
            {
                result.Details[i].VolumeValue = result.Details[i].VolumeValue - result.Details[i - 1].VolumeValue;
                result.Details[i].IsPositive = result.Details[i].Price > result.Details[i - 1].Price;
            }
            result.Details[0].IsPositive = true;

            var volumeValues = result.Details.Select(i => i.VolumeValue).Distinct().OrderByDescending(i => i).ToList();
            foreach (var item in result.Details)
            {
                item.VolumeIndex = volumeValues.IndexOf(item.VolumeValue);
            }

            result.MaxVolumeValue = volumeValues.FirstOrDefault();

            if (result.Details.Any())
            {
                result.Close = result.Open = result.Details.First().Price;
                var prices = result.Details.Select(i => i.Price).Distinct().OrderBy(i => i).ToList();
                result.High = prices.Last();
                result.Low = prices.First();
            }
            return result;
        }

        public JsonResult MinuteData(string code, int? count)
        {
            var result = new MinuteSummary();
            result.Code = code;

            var prefix = code.StartsWith("60") ? "sh" : "sz";
            if (code == "999999")
            {
                prefix = "sh";
                code = "000001";
            }
            var url = "http://data.gtimg.cn/flashdata/hushen/minute/" + prefix + code + ".js?" + new Random().NextDouble().ToString();
            var data = HttpGet(url);
            var rr = data.Split(new string[] { @"\n" }, StringSplitOptions.RemoveEmptyEntries);
            result.Code = code;
            result.Details = new List<MinuteDetail>();
            for (int i = 2; i < rr.Length - 1; i++)
            {
                var items = rr[i].Split(' ');

                result.Details.Add(new MinuteDetail
                {
                    Price = float.Parse(items[1]),
                    VolumeValue = int.Parse(items[2])
                });
            }

            if (count.HasValue)
            {
                result.Details = result.Details.Take(count.Value).ToList();
            }

            result.AverageVolumeValue = (int)(result.Details.Last().VolumeValue / result.Details.Count);

            for (int i = result.Details.Count - 1; i > 0; i--)
            {
                result.Details[i].VolumeValue = result.Details[i].VolumeValue - result.Details[i - 1].VolumeValue;
            }
            var volumeValues = result.Details.Select(i => i.VolumeValue).Distinct().OrderByDescending(i => i).ToList();
            foreach (var item in result.Details)
            {
                item.VolumeIndex = volumeValues.IndexOf(item.VolumeValue);
            }

            result.MaxVolumeValue = volumeValues.FirstOrDefault();

            if (result.Details.Any())
            {
                result.Close = result.Open = result.Details.First().Price;
                var prices = result.Details.Select(i => i.Price).Distinct().OrderBy(i => i).ToList();
                result.High = prices.Last();
                result.Low = prices.First();
            }


            return Json(result, JsonRequestBehavior.AllowGet);
        }
        public string HttpGet(string url)
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Method = "GET";
            request.ContentType = "text/html;charset=UTF-8";

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            Stream myResponseStream = response.GetResponseStream();
            StreamReader myStreamReader = new StreamReader(myResponseStream, Encoding.UTF8);
            string retString = myStreamReader.ReadToEnd();
            myStreamReader.Close();
            myResponseStream.Close();

            return retString;
        }
    }

    public class MinuteSummary
    {
        public string Code { get; set; }

        public float Open { get; set; }

        public float High { get; set; }

        public float Low { get; set; }

        public float Close { get; set; }

        public int AverageVolumeValue { get; set; }

        public float Amplitude
        {
            get
            {
                var abosluteAmplitude = Math.Max((this.High - this.Close), (this.Close - this.Low));
                var relativeAmplitude = abosluteAmplitude / this.Close;
                return relativeAmplitude;
            }
        }

        public int MaxVolumeValue { get; set; }

        public List<MinuteDetail> Details { get; set; }
    }

    public class MinuteDetail
    {
        public float Price { get; set; }

        public int VolumeValue { get; set; }

        public int VolumeIndex { get; set; }

        public bool IsPositive { get; set; }
    }

    public class COHL
    {
        public float Close { get; set; }

        public float Open { get; set; }

        public float High { get; set; }

        public float Low { get; set; }
    }
}